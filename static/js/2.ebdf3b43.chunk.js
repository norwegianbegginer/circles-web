(this["webpackJsonpcircles-web"]=this["webpackJsonpcircles-web"]||[]).push([[2],{136:function(t,n,e){"use strict";e.d(n,"b",(function(){return u})),e.d(n,"a",(function(){return o}));var r=e(0),c=e(49),a=e(139),u=function(t){var n=Object(r.useContext)(c.b);return Object(r.useMemo)((function(){return t(n[0])}),[n,t])},o=function(){var t=Object(r.useContext)(c.b);return Object(r.useRef)((function(n){console.log("\ud83d\udcc1",n.type,"=>",n.payload),function(t,n){t((function(t){var e={};switch(n.type){case"SET_CURRENT_ACCOUNT":e.currentAccount=Object(a.a)({},n.payload);break;case"SET_BACKGROUND_THEME":e.preferences||(e.preferences={}),e.preferences.backgroundTheme=Object(a.a)({},n.payload)}return Object(a.a)(Object(a.a)({},t),e)}))}(t[1],n)})).current}},140:function(t,n,e){"use strict";e.d(n,"c",(function(){return f})),e.d(n,"a",(function(){return b})),e.d(n,"d",(function(){return d})),e.d(n,"e",(function(){return p})),e.d(n,"g",(function(){return j})),e.d(n,"f",(function(){return v})),e.d(n,"b",(function(){return h}));var r=e(152),c=e(139),a=e(153),u=e(154),o=e(164),i=e(168),s=e(150),l=e(151),f=function(t){Object(o.a)(e,t);var n=Object(i.a)(e);function e(t,r,c,u){var o;return Object(a.a)(this,e),o=n.call(this,["account-accountInfo",{account_id:t,flags:!!r,rooms:!!c,friends:!!u}]),Object(l.b)("account_id",t,"string"),Object(l.b)("flags",r,"boolean","undefined"),Object(l.b)("rooms",c,"boolean","undefined"),Object(l.b)("friends",u,"boolean","undefined"),o}return Object(u.a)(e,[{key:"parse",value:function(t,n){return 200!==t?n:(Object(l.b)("data",n,"object"),Object(l.a)(n,"id","string"),Object(l.a)(n,"label","string"),Object(l.a)(n,"created_at","string"),Object(l.a)(n,"avatar_url","string","undefined"),Object(l.a)(n,"contact","object"),n.contact&&Object(l.a)(n.contact,"email","string"),Object(l.a)(n,"details","object"),Object(l.a)(n,"flags","object","undefined"),Object(l.a)(n,"friends","array","undefined"),Object(l.a)(n,"rooms","array","undefined"),Object(c.a)(Object(c.a)({},n),{},{created_at:new Date(n.created_at)}))}}]),e}(s.b),b=function(t){Object(o.a)(e,t);var n=Object(i.a)(e);function e(t,r){return Object(a.a)(this,e),n.call(this,["account-accountChange",{account_id:t,changes:JSON.stringify(r)}])}return Object(u.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b),d=function(t){Object(o.a)(e,t);var n=Object(i.a)(e);function e(t,r){var c;return Object(a.a)(this,e),c=n.call(this,["account-accountList",{volume:r,included:t}]),Object(l.b)("volume",r,"number","undefined"),Object(l.b)("included",t,"array","undefined"),c}return Object(u.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b),p=(s.b,function(t){Object(o.a)(e,t);var n=Object(i.a)(e);function e(t){return Object(a.a)(this,e),n.call(this,["account-accountLogin",{token:t}])}return Object(u.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b)),j=(s.b,s.b,function(t){Object(o.a)(e,t);var n=Object(i.a)(e);function e(t,r){return Object(a.a)(this,e),n.call(this,["room-roomInfo",{room_id:t,accounts:r}])}return Object(u.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b)),v=function(t){Object(o.a)(e,t);var n=Object(i.a)(e);function e(t,c,u){return Object(a.a)(this,e),n.call(this,["room-roomCreate",{label:c,invite:[].concat(Object(r.a)(u),[t])}])}return Object(u.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b),h=function(t){Object(o.a)(e,t);var n=Object(i.a)(e);function e(t){return Object(a.a)(this,e),n.call(this,["account-accountGetSuggestions",{account_id:t}])}return Object(u.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b)},142:function(t,n,e){"use strict";var r=e(139),c=e(0),a=e.n(c);n.a=function(t){var n,e=function(t){for(var n=Object(r.a)({},t),e=arguments.length,c=new Array(e>1?e-1:0),a=1;a<e;a++)c[a-1]=arguments[a];for(var u in n)c.includes(u)&&delete n[u];return n}(t,"children","className"),c=Object.freeze(Object(r.a)(Object(r.a)({display:"flex"},e),t.style)),u=null!==(n=t.rootComponent)&&void 0!==n?n:a.a.createElement("div");return a.a.cloneElement(u,{onClick:t.onClick,style:c,className:t.className,children:t.children})}},143:function(t,n,e){"use strict";e.d(n,"a",(function(){return o})),e.d(n,"b",(function(){return s})),e.d(n,"c",(function(){return l}));var r=e(24),c=e(0),a=e(136),u=e(9),o=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var a=Object(c.useRef)(null),u=l();if(null===a.current){var o=t.apply(void 0,e),i=function(t){a.current[0]=t,u()};a.current=[o,i]}return Object(c.useEffect)((function(){var n=t.apply(void 0,e);a.current[0]!==n&&a.current[1](n)}),[t,e]),a.current},i=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/home",e=Object(u.f)();Object(c.useEffect)((function(){t&&e.push(n)}),[t,n,e])},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",n=Object(a.b)((function(t){return t.currentAccount}));i(!!n,t)},l=function(){var t=Object(c.useState)(),n=Object(r.a)(t,2)[1];return Object(c.useCallback)((function(){return n({})}),[])}},145:function(t,n,e){"use strict";e.d(n,"b",(function(){return h})),e.d(n,"c",(function(){return O})),e.d(n,"a",(function(){return m})),e.d(n,"d",(function(){return g}));var r=e(137),c=e.n(r),a=e(165),u=e(152),o=e(138),i=e(0),s=e(150),l=e(143),f=e(157),b=e(140),d=e(136),p=e(147),j=f.a.host_url,v=new s.a(j),h=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var s=Object(i.useRef)(null),f=Object(l.c)();return Object(i.useEffect)((function(){s.current={status:102},function(){var n=Object(o.a)(c.a.mark((function n(){var r,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e||[],n.next=3,v.execute(Object(a.a)(t,Object(u.a)(r)));case 3:o=n.sent,s.current=o,f();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[]),s.current},O=function(){var t=Object(i.useRef)(null),n=Object(l.c)();if(null===t.current){var e=function(){var t=Object(o.a)(c.a.mark((function t(e){var r,u,o,i,s,l=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=l.length,u=new Array(r>1?r-1:0),o=1;o<r;o++)u[o-1]=l[o];return i=u||[],t.next=4,v.execute(Object(a.a)(e,i));case 4:return s=t.sent,n(),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();t.current=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),c=1;c<n;c++)r[c-1]=arguments[c];return e.apply(void 0,[t].concat(r))}}return t.current},m=function(t){var n,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,a=Object(d.b)((function(t){return t.currentAccount})),u=Object(i.useRef)(t?void 0:null!==a&&void 0!==a?a:void 0),s=Object(d.a)(),f=O(),j=Object(l.c)();return Object(i.useEffect)((function(){var n=function(){var n=Object(o.a)(c.a.mark((function n(){var o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f(b.c,t||(null===a||void 0===a?void 0:a.id),null===r||void 0===r?void 0:r.flags,null===r||void 0===r?void 0:r.rooms,null===r||void 0===r?void 0:r.contacts);case 2:200===(o=n.sent).status&&(u.current=o.data,e&&s(Object(p.b)(o.data)),j());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(t||(null===a||void 0===a?void 0:a.id))&&n()}),[t]),null!==(n=u.current)&&void 0!==n?n:null},g=function(t,n){var e,r=Object(i.useRef)(),a=O(),u=Object(l.c)();return Object(i.useEffect)((function(){t&&function(){var e=Object(o.a)(c.a.mark((function e(){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(b.g,t,!!n);case 2:200===(o=e.sent).status&&(r.current=o.data,u());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),null!==(e=r.current)&&void 0!==e?e:null}},147:function(t,n,e){"use strict";e.d(n,"b",(function(){return f})),e.d(n,"c",(function(){return b})),e.d(n,"a",(function(){return d}));var r=e(137),c=e.n(r),a=e(138),u=e(157),o=e(140),i=e(150),s=u.a.host_url,l=new i.a(s),f=function(t){return{type:"SET_CURRENT_ACCOUNT",payload:t}},b=function(){var t=Object(a.a)(c.a.mark((function t(n){var e,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.execute(new o.c(n,!0,!0,!0));case 2:return e=t.sent,r=e.data,t.abrupt("return",{type:"SET_CURRENT_ACCOUNT",payload:r});case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),d=function(t){return{type:"SET_BACKGROUND_THEME",payload:t}}},150:function(t,n,e){"use strict";e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return u}));var r=e(153),c=e(154),a=function(){function t(n){Object(r.a)(this,t),this.url=void 0,this.url=n}return Object(c.a)(t,[{key:"makeArguments",value:function(t){return Object.entries(t).map((function(t){return"".concat(t[0],"=").concat("object"===typeof t[1]?JSON.stringify(t[1]):t[1])})).join("&")}},{key:"execute",value:function(t){var n=this;return new Promise((function(e,r){var c=!1,a=t.exec[0],u=n.makeArguments(t.exec[1]),o="".concat(n.url).concat(a,"?").concat(u),i=new Headers({"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"});fetch(o,{mode:"cors",headers:i}).then((function(t){return t.json()})).then((function(t){if(!c){c=!0;var n=t;console.log("\ud83d\udcf6",a,"=>",n),e(n)}})).catch(r)}))}}]),t}(),u=function(){function t(n){Object(r.a)(this,t),this.exec=void 0,this.status=void 0,this.exec=n,this.status=0}return Object(c.a)(t,[{key:"parse",value:function(t,n){return n}}]),t}()},151:function(t,n,e){"use strict";e.d(n,"c",(function(){return r})),e.d(n,"b",(function(){return a})),e.d(n,"a",(function(){return u}));var r=function(t){return null!==t&&102!==t.status},c=function(t){return t.toString().replace(/,/g,", ")},a=function(t,n){var e=typeof n;"object"===e&&(null===n?e="null":Array.isArray(n)&&(e="array"));for(var r=arguments.length,a=new Array(r>2?r-2:0),u=2;u<r;u++)a[u-2]=arguments[u];if(!a.includes(e))throw new Error("Expected ".concat(c(a)," for ").concat(t,", got ").concat(typeof n));return n},u=function(t,n){for(var e=t[n],r=arguments.length,c=new Array(r>2?r-2:0),u=2;u<r;u++)c[u-2]=arguments[u];return a.apply(void 0,[n,e].concat(c)),e}},157:function(t,n,e){"use strict";n.a={host_url:"https://us-central1-ping-82fee.cloudfunctions.net/"}},162:function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"a",(function(){return c}));var r=function(t,n){localStorage.setItem(t,n)},c=function(t){localStorage.removeItem(t)}},163:function(t,n,e){"use strict";n.a=e.p+"static/media/wave.f70c3bfc.svg"},166:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"a",(function(){return s})),e.d(n,"d",(function(){return f})),e.d(n,"c",(function(){return b}));var r=e(137),c=e.n(r),a=e(138),u=e(59),o=(e(82),e(162)),i=function(){var t=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var e=new u.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/contacts.readonly"),u.auth().signInWithPopup(e).then((function(n){l(),t(n)})).catch((function(t){var e=t.code,r=t.message;console.log("\ud83d\udd12 Authorization =>",e,r),n(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(a.a)(c.a.mark((function t(n,e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){u.auth().signInWithEmailAndPassword(n,e).then((function(n){l(),t(n)})).catch((function(t){var n=t.code,e=t.message;console.log("\ud83d\udd12 Authorization =>",n,e),r(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),l=function(){var t,n,e=null!==(t=null===(n=u.auth())||void 0===n?void 0:n.currentUser)&&void 0!==t?t:null;e&&e.getIdToken(!0).then((function(t){console.log(t),Object(o.b)("accountIdToken",t)})).catch((function(t){var n=t.code,e=t.message;console.log("\ud83d\udd12 Authorization =>",n,e)}))},f=function(){var t=Object(a.a)(c.a.mark((function t(n,e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){u.auth().createUserWithEmailAndPassword(n,e).then((function(n){t(n)})).catch((function(t){var n=t.code,e=t.message;console.log("\ud83d\udd12 Authorization =>",n,e),r(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),b=function(){var t=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){u.auth().signOut().then((function(n){t(n)})).catch((function(t){var e=t.code,r=t.message;console.log("\ud83d\udd12 Authorization =>",e,r),n(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},216:function(t,n,e){"use strict";e.r(n);var r=e(4),c=e(137),a=e.n(c),u=e(138),o=e(24),i=e(0),s=e(58),l=e(146),f=e(123),b=Object(f.a)((function(t){return{root:Object(l.a)({minHeight:"calc(100vh - (300px + 42px))",alignItems:"center"},t.breakpoints.up("sm"),{minHeight:"calc(100vh - (350px + 42px))",alignItems:"flex-start"}),container:{maxWidth:t.breakpoints.values.md,width:"100%",padding:"0 ".concat(t.spacing(4),"px")},inputWrapper:{},loginImage:Object(l.a)({width:"auto",height:"240px",position:"absolute",right:"2%",bottom:"0px"},t.breakpoints.up("sm"),{height:"310px",bottom:"5px"}),imgContainer:Object(l.a)({height:"300px",position:"relative",overflow:"hidden",background:"linear-gradient(to top left, ".concat(t.palette.primary.dark,", ").concat(t.palette.primary.main,")")},t.breakpoints.up("sm"),{height:"350px"}),wave:{position:"absolute",zIndex:5,bottom:"-10%",left:"-1%",width:"102%",height:"auto"},footerWrapper:{maxWidth:t.breakpoints.values.md,margin:"0 auto",padding:"0 ".concat(t.spacing(4),"px")}}})),d=function(t){return{title:{en_US:"Sign in",pl_PL:"B\u0105d\u017a w kontakcie!",de_DE:"Stayen ins Touchejen"},yes:t.yes}},p=e(227),j=e(339),v=e(128),h=e(323),O=e(228),m=e(324),g=e(326),y=e(9),x=e(142),w=e.p+"static/media/verifed.465bf5bf.svg",k=e(163),A=e(166),C=e(343),_=e(322),E=e(145),S=e(140),N=e(136),T=e(147),I=e(143);n.default=function(){var t=Object(y.f)(),n=Object(s.useLittera)(d),e=Object(o.a)(n,1)[0],c=b(),l=Object(E.c)(),f=Object(N.a)(),R=Object(i.useState)(""),U=Object(o.a)(R,2),P=U[0],W=U[1],z=Object(i.useState)(""),D=Object(o.a)(z,2),B=D[0],G=D[1],H=Object(i.useState)(""),L=Object(o.a)(H,2),J=L[0],M=L[1],K=Object(i.useState)(!1),F=Object(o.a)(K,2),q=F[0],Q=F[1];Object(I.b)();var V=function(){var n=Object(u.a)(a.a.mark((function n(e){var r,c,u,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l(S.c,(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.uid)||"",!0);case 2:200===(c=n.sent).status?(f(Object(T.b)(c.data)),(null===(u=c.data)||void 0===u||null===(o=u.flags)||void 0===o?void 0:o.includes("needs_init"))?t.push("/welcome"):t.push("/home")):404===c.status&&M("Account not found!"),0!==c.status&&Q(!1);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),X=function(t){return function(n){var e,r,c=null!==(e=null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.value)&&void 0!==e?e:"";q||("email"===t&&W(c),"password"===t&&G(c))}};return Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsxs)("div",{className:c.imgContainer,children:[Object(r.jsx)("img",{className:c.loginImage,src:w,alt:"loginImage"}),Object(r.jsx)("img",{className:c.wave,src:k.a,alt:""})]}),Object(r.jsx)(x.a,{justifyContent:"center",width:"100%",className:c.root,children:Object(r.jsxs)("div",{className:c.container,children:[Object(r.jsx)(p.a,{variant:"h3",paragraph:!0,children:e.title}),Object(r.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),M(""),Q(!0),!q){var n=P,e=B;Object(A.a)(n,e).then(V).catch((function(t){M(t.message),Q(!1)}))}},children:[Object(r.jsxs)(x.a,{className:c.inputWrapper,flexDirection:"column",children:[Object(r.jsx)(j.a,{style:{marginBottom:"15px"},id:"email-input",value:P,onChange:X("email"),type:"email",label:"E-Mail",variant:"outlined"}),Object(r.jsx)(j.a,{style:{marginBottom:"15px"},id:"password-input",value:B,onChange:X("password"),type:"password",label:"Password",variant:"outlined"})]}),J&&Object(r.jsxs)(C.a,{style:{margin:"10px 0"},severity:"error",children:[Object(r.jsx)(_.a,{children:"Upps..."}),J]}),Object(r.jsxs)(x.a,{justifyContent:"space-between",children:[Object(r.jsx)(v.a,{onClick:function(){t.push("/signup")},color:"primary",type:"button",children:"Sign Up"}),Object(r.jsx)(h.a,{color:"primary","aria-label":"add",type:"submit",children:Object(r.jsx)(O.a,{style:{color:"white"},children:"keyboard_arrow_right"})})]})]}),Object(r.jsx)(v.a,{onClick:function(){M(""),Q(!0),Object(A.b)().then(V).catch((function(t){M(t.message),Q(!1)}))},type:"button",children:"Login with Google!"})]})}),Object(r.jsx)(x.a,{className:c.footerWrapper,alignItems:"center",justifyContent:"flex-end",height:"42px",children:Object(r.jsx)(p.a,{align:"right",children:"Forgot password?"})}),q?Object(r.jsx)(m.a,{open:!0,style:{zIndex:5},children:Object(r.jsx)(g.a,{color:"primary"})}):null]})}}}]);
//# sourceMappingURL=2.ebdf3b43.chunk.js.map