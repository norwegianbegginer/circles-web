(this["webpackJsonpcircles-web"]=this["webpackJsonpcircles-web"]||[]).push([[2],{140:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"a",(function(){return u}));var r=e(0),c=e(51),a=e(141),i=function(t){var n=Object(r.useContext)(c.b);return Object(r.useMemo)((function(){return t(n[0])}),[n,t])},u=function(){var t=Object(r.useContext)(c.b);return Object(r.useRef)((function(n){console.log("\ud83d\udcc1",n.type,"=>",n.payload),function(t,n){t((function(t){var e={};switch(n.type){case"SET_CURRENT_ACCOUNT":e.currentAccount=Object(a.a)({},n.payload);break;case"SET_BACKGROUND_THEME":e.preferences||(e.preferences={}),e.preferences.backgroundTheme=Object(a.a)({},n.payload)}return Object(a.a)(Object(a.a)({},t),e)}))}(t[1],n)})).current}},144:function(t,n,e){"use strict";e.d(n,"c",(function(){return f})),e.d(n,"a",(function(){return d})),e.d(n,"d",(function(){return b})),e.d(n,"e",(function(){return v})),e.d(n,"g",(function(){return h})),e.d(n,"f",(function(){return p})),e.d(n,"b",(function(){return j}));var r=e(159),c=e(141),a=e(152),i=e(153),u=e(169),o=e(172),s=e(156),l=e(157),f=function(t){Object(u.a)(e,t);var n=Object(o.a)(e);function e(t,r,c,i){var u;return Object(a.a)(this,e),u=n.call(this,["account-accountInfo",{account_id:t,flags:!!r,rooms:!!c,friends:!!i}]),Object(l.b)("account_id",t,"string"),Object(l.b)("flags",r,"boolean","undefined"),Object(l.b)("rooms",c,"boolean","undefined"),Object(l.b)("friends",i,"boolean","undefined"),u}return Object(i.a)(e,[{key:"parse",value:function(t,n){return 200!==t?n:(Object(l.b)("data",n,"object"),Object(l.a)(n,"id","string"),Object(l.a)(n,"label","string"),Object(l.a)(n,"created_at","string"),Object(l.a)(n,"avatar_url","string","undefined"),Object(l.a)(n,"contact","object"),n.contact&&Object(l.a)(n.contact,"email","string"),Object(l.a)(n,"details","object"),Object(l.a)(n,"flags","object","undefined"),Object(l.a)(n,"friends","array","undefined"),Object(l.a)(n,"rooms","array","undefined"),Object(c.a)(Object(c.a)({},n),{},{created_at:new Date(n.created_at)}))}}]),e}(s.b),d=function(t){Object(u.a)(e,t);var n=Object(o.a)(e);function e(t,r){return Object(a.a)(this,e),n.call(this,["account-accountChange",{account_id:t,changes:JSON.stringify(r)}])}return Object(i.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b),b=function(t){Object(u.a)(e,t);var n=Object(o.a)(e);function e(t,r){var c;return Object(a.a)(this,e),c=n.call(this,["account-accountList",{volume:r,included:t}]),Object(l.b)("volume",r,"number","undefined"),Object(l.b)("included",t,"array","undefined"),c}return Object(i.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b),v=(s.b,function(t){Object(u.a)(e,t);var n=Object(o.a)(e);function e(t){return Object(a.a)(this,e),n.call(this,["account-accountLogin",{token:t}])}return Object(i.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b)),h=(s.b,s.b,function(t){Object(u.a)(e,t);var n=Object(o.a)(e);function e(t,r){return Object(a.a)(this,e),n.call(this,["room-roomInfo",{room_id:t,accounts:r}])}return Object(i.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b)),p=function(t){Object(u.a)(e,t);var n=Object(o.a)(e);function e(t,c,i){return Object(a.a)(this,e),n.call(this,["room-roomCreate",{label:c,invite:[].concat(Object(r.a)(i),[t])}])}return Object(i.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b),j=function(t){Object(u.a)(e,t);var n=Object(o.a)(e);function e(t){return Object(a.a)(this,e),n.call(this,["account-accountGetSuggestions",{account_id:t}])}return Object(i.a)(e,[{key:"parse",value:function(t,n){return n}}]),e}(s.b)},146:function(t,n,e){"use strict";var r=e(141),c=e(0),a=e.n(c);n.a=function(t){var n,e=function(t){for(var n=Object(r.a)({},t),e=arguments.length,c=new Array(e>1?e-1:0),a=1;a<e;a++)c[a-1]=arguments[a];for(var i in n)c.includes(i)&&delete n[i];return n}(t,"children","className"),c=Object.freeze(Object(r.a)(Object(r.a)({display:"flex"},e),t.style)),i=null!==(n=t.rootComponent)&&void 0!==n?n:a.a.createElement("div");return a.a.cloneElement(i,{onClick:t.onClick,style:c,className:t.className,children:t.children})}},147:function(t,n,e){"use strict";e.d(n,"a",(function(){return u})),e.d(n,"b",(function(){return s})),e.d(n,"c",(function(){return l}));var r=e(26),c=e(0),a=e(140),i=e(9),u=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var a=Object(c.useRef)(null),i=l();if(null===a.current){var u=t.apply(void 0,e),o=function(t){a.current[0]=t,i()};a.current=[u,o]}return Object(c.useEffect)((function(){var n=t.apply(void 0,e);a.current[0]!==n&&a.current[1](n)}),[t,e]),a.current},o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/home",e=Object(i.f)();Object(c.useEffect)((function(){t&&e.push(n)}),[t,n,e])},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",n=Object(a.b)((function(t){return t.currentAccount}));o(!!n,t)},l=function(){var t=Object(c.useState)(),n=Object(r.a)(t,2)[1];return Object(c.useCallback)((function(){return n({})}),[])}},149:function(t,n,e){"use strict";e.d(n,"b",(function(){return m})),e.d(n,"c",(function(){return g})),e.d(n,"a",(function(){return y})),e.d(n,"d",(function(){return w}));var r=e(141),c=e(142),a=e.n(c),i=e(170),u=e(159),o=e(143),s=e(0),l=e(156),f=e(147),d=e(161),b=e(144),v=e(140),h=e(151),p=e(158),j=d.a.host_url,O=new l.a(j),m=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var c=Object(s.useRef)(null),l=Object(f.c)();return Object(s.useEffect)((function(){c.current={status:102},function(){var n=Object(o.a)(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e||[],n.next=3,O.execute(Object(i.a)(t,Object(u.a)(r)));case 3:o=n.sent,c.current=o,l();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[]),c.current},g=function(){var t=Object(s.useRef)(null),n=Object(f.c)();if(null===t.current){var e=function(){var t=Object(o.a)(a.a.mark((function t(e){var r,c,u,o,s,l=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=l.length,c=new Array(r>1?r-1:0),u=1;u<r;u++)c[u-1]=l[u];return o=c||[],t.next=4,O.execute(Object(i.a)(e,o));case 4:return s=t.sent,n(),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();t.current=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),c=1;c<n;c++)r[c-1]=arguments[c];return e.apply(void 0,[t].concat(r))}}return t.current},y=function(t){var n,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2?arguments[2]:void 0,i=Object(v.b)((function(t){return t.currentAccount})),u=Object(s.useRef)(t?void 0:null!==i&&void 0!==i?i:void 0),l=Object(v.a)(),d=g(),j=Object(f.c)();return Object(s.useEffect)((function(){var n=function(){var n=Object(o.a)(a.a.mark((function n(){var o,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(b.c,t||(null===i||void 0===i?void 0:i.id),null===c||void 0===c?void 0:c.flags,null===c||void 0===c?void 0:c.rooms,null===c||void 0===c?void 0:c.contacts);case 2:200===(o=n.sent).status&&(s=new p.a(Object(r.a)({id:t||(null===i||void 0===i?void 0:i.id)},o.data)),u.current=s,e&&l(Object(h.b)(s)),j());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(t||(null===i||void 0===i?void 0:i.id))&&n()}),[t]),null!==(n=u.current)&&void 0!==n?n:null},w=function(t,n){var e,r=Object(s.useRef)(),c=g(),i=Object(f.c)();return Object(s.useEffect)((function(){t&&function(){var e=Object(o.a)(a.a.mark((function e(){var u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(b.g,t,!!n);case 2:200===(u=e.sent).status&&(r.current=u.data,i());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),null!==(e=r.current)&&void 0!==e?e:null}},151:function(t,n,e){"use strict";e.d(n,"b",(function(){return f})),e.d(n,"c",(function(){return d})),e.d(n,"a",(function(){return b}));var r=e(142),c=e.n(r),a=e(143),i=e(161),u=e(144),o=e(156),s=i.a.host_url,l=new o.a(s),f=function(t){return{type:"SET_CURRENT_ACCOUNT",payload:t}},d=function(){var t=Object(a.a)(c.a.mark((function t(n){var e,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.execute(new u.c(n,!0,!0,!0));case 2:return e=t.sent,r=e.data,t.abrupt("return",{type:"SET_CURRENT_ACCOUNT",payload:r});case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),b=function(t){return{type:"SET_BACKGROUND_THEME",payload:t}}},156:function(t,n,e){"use strict";e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return i}));var r=e(152),c=e(153),a=function(){function t(n){Object(r.a)(this,t),this.url=void 0,this.url=n}return Object(c.a)(t,[{key:"makeArguments",value:function(t){return Object.entries(t).map((function(t){return"".concat(t[0],"=").concat("object"===typeof t[1]?JSON.stringify(t[1]):t[1])})).join("&")}},{key:"execute",value:function(t){var n=this;return new Promise((function(e,r){var c=!1,a=t.exec[0],i=n.makeArguments(t.exec[1]),u="".concat(n.url).concat(a,"?").concat(i),o=new Headers({"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"});fetch(u,{mode:"cors",headers:o}).then((function(t){return t.json()})).then((function(t){if(!c){c=!0;var n=t;console.log("\ud83d\udcf6",a,"=>",n),e(n)}})).catch(r)}))}}]),t}(),i=function(){function t(n){Object(r.a)(this,t),this.exec=void 0,this.status=void 0,this.exec=n,this.status=0}return Object(c.a)(t,[{key:"parse",value:function(t,n){return n}}]),t}()},157:function(t,n,e){"use strict";e.d(n,"c",(function(){return r})),e.d(n,"b",(function(){return a})),e.d(n,"a",(function(){return i}));var r=function(t){return null!==t&&102!==t.status},c=function(t){return t.toString().replace(/,/g,", ")},a=function(t,n){var e=typeof n;"object"===e&&(null===n?e="null":Array.isArray(n)&&(e="array"));for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(!a.includes(e))throw new Error("Expected ".concat(c(a)," for ").concat(t,", got ").concat(typeof n));return n},i=function(t,n){for(var e=t[n],r=arguments.length,c=new Array(r>2?r-2:0),i=2;i<r;i++)c[i-2]=arguments[i];return a.apply(void 0,[n,e].concat(c)),e}},158:function(t,n,e){"use strict";var r=e(152),c=e(153),a=function(){function t(n){var e,c;Object(r.a)(this,t),this.id=void 0,this.label=void 0,this.created_at=void 0,this.contact=void 0,this.avatar_url=void 0,this.details=void 0,this.flags=void 0,this.rooms=void 0,this.friends=void 0,this.id=n.id,this.label=n.label,this.created_at=new Date(n.created_at),this.contact=null!==(e=n.contact)&&void 0!==e?e:[],this.avatar_url=n.avatar_url,this.details=null!==(c=n.details)&&void 0!==c?c:{},this.flags=n.flags,this.rooms=n.rooms,this.friends=n.friends}return Object(c.a)(t,[{key:"name",value:function(){for(var t,n=this,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return(!r||r.length<=0)&&(r=["first_name","last_name"]),null!==(t=r.map((function(t){var e,r;return null!==(e=null===n||void 0===n||null===(r=n.details)||void 0===r?void 0:r[t])&&void 0!==e?e:null})).filter((function(t){return!!t})).join(" "))&&void 0!==t?t:this.label}},{key:"isValid",get:function(){return Boolean(this.id&&this.label)}}]),t}();n.a=a},161:function(t,n,e){"use strict";n.a={host_url:"https://us-central1-ping-82fee.cloudfunctions.net/"}},167:function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"a",(function(){return c}));var r=function(t,n){localStorage.setItem(t,n)},c=function(t){localStorage.removeItem(t)}},168:function(t,n,e){"use strict";n.a=e.p+"static/media/wave.f70c3bfc.svg"},175:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"a",(function(){return s})),e.d(n,"d",(function(){return f})),e.d(n,"c",(function(){return d}));var r=e(142),c=e.n(r),a=e(143),i=e(49),u=(e(83),e(167)),o=function(){var t=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var e=new i.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/contacts.readonly"),i.auth().signInWithPopup(e).then((function(n){l(),t(n)})).catch((function(t){var e=t.code,r=t.message;console.log("\ud83d\udd12 Authorization =>",e,r),n(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(a.a)(c.a.mark((function t(n,e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){i.auth().signInWithEmailAndPassword(n,e).then((function(n){l(),t(n)})).catch((function(t){var n=t.code,e=t.message;console.log("\ud83d\udd12 Authorization =>",n,e),r(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),l=function(){var t,n,e=null!==(t=null===(n=i.auth())||void 0===n?void 0:n.currentUser)&&void 0!==t?t:null;e&&e.getIdToken(!0).then((function(t){console.log(t),Object(u.b)("accountIdToken",t)})).catch((function(t){var n=t.code,e=t.message;console.log("\ud83d\udd12 Authorization =>",n,e)}))},f=function(){var t=Object(a.a)(c.a.mark((function t(n,e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){i.auth().createUserWithEmailAndPassword(n,e).then((function(n){t(n)})).catch((function(t){var n=t.code,e=t.message;console.log("\ud83d\udd12 Authorization =>",n,e),r(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),d=function(){var t=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){i.auth().signOut().then((function(n){t(n)})).catch((function(t){var e=t.code,r=t.message;console.log("\ud83d\udd12 Authorization =>",e,r),n(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},222:function(t,n,e){"use strict";e.r(n);var r=e(4),c=e(142),a=e.n(c),i=e(141),u=e(143),o=e(26),s=e(0),l=e(61),f=e(150),d=e(127),b=Object(d.a)((function(t){return{root:Object(f.a)({minHeight:"calc(100vh - (300px + 42px))",alignItems:"center"},t.breakpoints.up("sm"),{minHeight:"calc(100vh - (350px + 42px))",alignItems:"flex-start"}),container:{maxWidth:t.breakpoints.values.md,width:"100%",padding:"0 ".concat(t.spacing(4),"px")},inputWrapper:{},loginImage:Object(f.a)({width:"auto",height:"240px",position:"absolute",right:"2%",bottom:"0px"},t.breakpoints.up("sm"),{height:"310px",bottom:"5px"}),imgContainer:Object(f.a)({height:"300px",position:"relative",overflow:"hidden",background:"linear-gradient(to top left, ".concat(t.palette.primary.dark,", ").concat(t.palette.primary.main,")")},t.breakpoints.up("sm"),{height:"350px"}),wave:{position:"absolute",zIndex:5,bottom:"-10%",left:"-1%",width:"102%",height:"auto"},footerWrapper:{maxWidth:t.breakpoints.values.md,margin:"0 auto",padding:"0 ".concat(t.spacing(4),"px")}}})),v=function(t){return{title:{en_US:"Sign in",pl_PL:"B\u0105d\u017a w kontakcie!",de_DE:"Stayen ins Touchejen"},yes:t.yes}},h=e(233),p=e(344),j=e(132),O=e(328),m=e(234),g=e(329),y=e(331),w=e(9),x=e(146),k=e.p+"static/media/verifed.465bf5bf.svg",_=e(168),A=e(175),C=e(348),E=e(327),S=e(149),N=e(144),T=e(140),I=e(151),R=e(147),U=e(158);n.default=function(){var t=Object(w.f)(),n=Object(l.useLittera)(v),e=Object(o.a)(n,1)[0],c=b(),f=Object(S.c)(),d=Object(T.a)(),P=Object(s.useState)(""),W=Object(o.a)(P,2),z=W[0],D=W[1],B=Object(s.useState)(""),G=Object(o.a)(B,2),H=G[0],L=G[1],J=Object(s.useState)(""),M=Object(o.a)(J,2),K=M[0],F=M[1],V=Object(s.useState)(!1),q=Object(o.a)(V,2),Q=q[0],X=q[1];Object(R.b)();var Y=function(){var n=Object(u.a)(a.a.mark((function n(e){var r,c,u,o,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f(N.c,(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.uid)||"",!0);case 2:200===(c=n.sent).status?(d(Object(I.b)(new U.a(Object(i.a)({id:null===e||void 0===e||null===(u=e.user)||void 0===u?void 0:u.uid},c.data)))),(null===(o=c.data)||void 0===o||null===(s=o.flags)||void 0===s?void 0:s.includes("needs_init"))?t.push("/welcome"):t.push("/home")):404===c.status&&F("Account not found!"),0!==c.status&&X(!1);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),Z=function(t){return function(n){var e,r,c=null!==(e=null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.value)&&void 0!==e?e:"";Q||("email"===t&&D(c),"password"===t&&L(c))}};return Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsxs)("div",{className:c.imgContainer,children:[Object(r.jsx)("img",{className:c.loginImage,src:k,alt:"loginImage"}),Object(r.jsx)("img",{className:c.wave,src:_.a,alt:""})]}),Object(r.jsx)(x.a,{justifyContent:"center",width:"100%",className:c.root,children:Object(r.jsxs)("div",{className:c.container,children:[Object(r.jsx)(h.a,{variant:"h3",paragraph:!0,children:e.title}),Object(r.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),F(""),X(!0),!Q){var n=z,e=H;Object(A.a)(n,e).then(Y).catch((function(t){F(t.message),X(!1)}))}},children:[Object(r.jsxs)(x.a,{className:c.inputWrapper,flexDirection:"column",children:[Object(r.jsx)(p.a,{style:{marginBottom:"15px"},id:"email-input",value:z,onChange:Z("email"),type:"email",label:"E-Mail",variant:"outlined"}),Object(r.jsx)(p.a,{style:{marginBottom:"15px"},id:"password-input",value:H,onChange:Z("password"),type:"password",label:"Password",variant:"outlined"})]}),K&&Object(r.jsxs)(C.a,{style:{margin:"10px 0"},severity:"error",children:[Object(r.jsx)(E.a,{children:"Upps..."}),K]}),Object(r.jsxs)(x.a,{justifyContent:"space-between",children:[Object(r.jsx)(j.a,{onClick:function(){t.push("/signup")},color:"primary",type:"button",children:"Sign Up"}),Object(r.jsx)(O.a,{color:"primary","aria-label":"add",type:"submit",children:Object(r.jsx)(m.a,{style:{color:"white"},children:"keyboard_arrow_right"})})]})]}),Object(r.jsx)(j.a,{onClick:function(){F(""),X(!0),Object(A.b)().then(Y).catch((function(t){F(t.message),X(!1)}))},type:"button",children:"Login with Google!"})]})}),Object(r.jsx)(x.a,{className:c.footerWrapper,alignItems:"center",justifyContent:"flex-end",height:"42px",children:Object(r.jsx)(h.a,{align:"right",children:"Forgot password?"})}),Q?Object(r.jsx)(g.a,{open:!0,style:{zIndex:5},children:Object(r.jsx)(y.a,{color:"primary"})}):null]})}}}]);
//# sourceMappingURL=2.902ddf65.chunk.js.map