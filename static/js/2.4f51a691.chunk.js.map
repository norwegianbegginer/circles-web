{"version":3,"sources":["store/hooks.ts","store/reducer.ts","components/utils/Flex.tsx","api/commands.ts","utils/hooks/general.ts","api/hooks.ts","store/actions.ts","api/client.ts","api/models/Account.model.ts","api/utils.ts","config/config.ts","storage/storage.ts","assets/wave.svg","api/auth.ts","components/pages/Login/styles.ts","components/pages/Login/trans.ts","assets/verifed.svg","components/pages/Login/index.tsx"],"names":["useStore","stateFn","context","useContext","StoreContext","useMemo","useDispatch","useRef","action","console","log","type","payload","setStore","state","changes","currentAccount","preferences","backgroundTheme","reduceState","current","Flex","props","reducedProps","_props","args","key","includes","reduceProps","style","Object","freeze","display","rootEl","rootComponent","React","createElement","cloneElement","onClick","className","children","AccountInfo","account_id","flags","rooms","friends","checkType","status","data","checkField","contact","created_at","Date","Command","AccountChange","JSON","stringify","AccountList","included","volume","AccountLogin","token","RoomInfo","room_id","accounts","RoomCreate","label","invite","AccountGetSuggestions","useForkedState","fn","ref","signal","useSignal","value","setState","val","useEffect","useRestrictedPage","condition","path","history","useHistory","push","useRestrictedPageForCurrentAccount","useState","updateState","useCallback","HOST_URL","config","host_url","cli","Client","useCommand","command","a","_args","execute","rq","useDispatchCommand","useAccount","updateStore","options","undefined","dispatchStore","dispatchCommand","id","contacts","accountInfoRq","acc","Account","setCurrentAccount","useRoom","roomInfoRq","updateCurrentAccount","setBackgroundTheme","theme","url","this","entries","map","e","join","Promise","resolve","reject","once","cmd","exec","makeArguments","reqUrl","headers","Headers","fetch","mode","then","response","json","parsed_response","catch","account","avatar_url","details","include","length","inc","filter","Boolean","first_name","last_name","toUpperCase","isLoaded","request","arrayToStringList","arr","toString","replace","name","t","Array","isArray","types","Error","obj","field","setLocalStorageValue","localStorage","setItem","resetLocalStorageValue","removeItem","signInWithPopup","provider","firebase","GoogleAuthProvider","addScope","result","fetchAccountIdToken","error","errorCode","code","errorMessage","message","signInWithCredentials","email","password","signInWithEmailAndPassword","currentUser","getIdToken","idToken","signUpWithCredentials","createUserWithEmailAndPassword","signOut","useStyles","makeStyles","root","minHeight","alignItems","breakpoints","up","container","maxWidth","values","md","width","padding","spacing","inputWrapper","loginImage","height","position","right","bottom","imgContainer","overflow","background","palette","primary","dark","main","wave","zIndex","left","footerWrapper","margin","translations","preset","title","en_US","pl_PL","de_DE","yes","Login","useLittera","translated","classes","emailInput","setEmailInput","passwordInput","setPasswordInput","errorMsg","setErrorMsg","isLoading","setIsLoading","handleLogin","user","uid","handleInputChange","inputName","event","newValue","target","src","alt","waveAsset","justifyContent","Typography","variant","paragraph","onSubmit","preventDefault","err","flexDirection","TextField","marginBottom","onChange","Alert","severity","AlertTitle","Button","color","Fab","aria-label","Icon","align","Backdrop","open","CircularProgress"],"mappings":"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","file":"static/js/2.4f51a691.chunk.js","sourcesContent":["import { useContext, useRef, useMemo } from \"react\"\nimport { StoreContext, IState } from \"./context\";\nimport { reduceState } from \"./reducer\";\n\n/**\n * Access Store variables.\n * @param stateFn Callback providing Store state.\n * @example const myValue = useStore(state => state.myValue);\n */\nexport const useStore = <T>(stateFn: (state: IState) => T) => {\n    const context = useContext(StoreContext);\n\n    return useMemo(() => stateFn(context[0]), [context, stateFn]);\n}\n\nexport type StoreAction<T=any> = { type: string, payload?: T }\n\n/**\n * Returns dispatch method for Store.\n * @example \n * const dispatch = useDispatch();\n * ...\n * dispatch({ type: \"ACTION_NAME\", payload: \"changes\" });\n */\nexport const useDispatch = () => {\n    const context = useContext(StoreContext);\n\n    const ref = useRef(<T=any>(action: StoreAction<T>) => {\n        console.log(\"ðŸ“\", action.type, \"=>\", action.payload);\n        reduceState(context[1], action)\n    });\n\n    return ref.current;\n}","import { IState } from \"./context\";\nimport { StoreAction } from \"./hooks\";\n\nexport const reduceState = (setStore: React.Dispatch<React.SetStateAction<IState>>, action: StoreAction) => {\n    setStore((state: IState) => {\n        const changes: Partial<IState> = {};\n        \n        // Add actions here!\n        // ! This might seem a little complicated but some refactoring might help.\n        switch(action.type) {\n            case \"SET_CURRENT_ACCOUNT\":\n                changes.currentAccount = {...action.payload};\n                break;\n\n            case \"SET_BACKGROUND_THEME\":\n                // TODO: Make sure to initialize preferences before accessing reducer...\n                if (!changes.preferences) changes.preferences = {};\n                // @ts-ignore\n                changes.preferences.backgroundTheme = { ...action.payload } as { id: string, url: string, label: string }\n                break;\n        }\n\n        return {...state, ...changes}\n    });\n}","import React from \"react\";\n\ntype FlexAlignType =\n  | 'flex-start'\n  | 'flex-end'\n  | 'center'\n  | 'stretch'\n  | 'baseline'\n\ntype FlexProperties = {\n  inline?: boolean\n  flexDirection?: 'row' | 'column' | 'row-reverse' | 'column-reverse'\n  flexWrap?: 'nowrap' | 'wrap' | 'wrap-reverse'\n  justifyContent?:\n    | 'flex-start'\n    | 'flex-end'\n    | 'center'\n    | 'space-between'\n    | 'space-around'\n    | 'space-evenly'\n  alignContent?:\n    | 'flex-start'\n    | 'flex-end'\n    | 'center'\n    | 'stretch'\n    | 'space-between'\n    | 'space-around'\n  alignItems?: FlexAlignType\n}\n\ntype FlexProps = {\n  children: React.ReactNode\n  className?: string\n  onClick?: () => void\n  rootComponent?: React.Component\n  style?: object\n  width?: number | string\n  height?: number | string\n} & FlexProperties\n\nconst reduceProps = (props: FlexProps, ...args: string[]) => {\n    let _props = {...props};\n\n    for(var key in _props) {\n        // @ts-ignore\n        if(args.includes(key)) delete _props[key];\n    }\n\n    return _props;\n}\n\n/**\n * A component for easier flex-box implementation.\n * @example <Flex justifyContent=\"space-between\" alignItems=\"center\">...</Flex>\n */\nconst Flex = (props: FlexProps) => {\n  const reducedProps = reduceProps(props, \"children\", \"className\");\n\n  const style = Object.freeze({\n      display: \"flex\",\n      ...reducedProps,\n      ...props.style\n  });\n\n  const rootEl = props.rootComponent ?? React.createElement(\"div\");\n\n  return React.cloneElement(rootEl as React.ReactElement<any>, { onClick: props.onClick, style, className: props.className, children: props.children });\n}\n\nexport default Flex;","import { Command } from \"./client\";\nimport { IAccount } from \"types\";\nimport { checkField, checkType } from \"./utils\";\n\nexport class AccountInfo extends Command {\n    constructor(account_id: string, flags?: boolean, rooms?: boolean, friends?: boolean) {\n        super([\"account-accountInfo\", { account_id, flags: !!flags, rooms: !!rooms, friends: !!friends }]);\n\n        checkType(\"account_id\", account_id, \"string\");\n\n        checkType(\"flags\", flags, \"boolean\", \"undefined\");\n        checkType(\"rooms\", rooms, \"boolean\", \"undefined\");\n        checkType(\"friends\", friends, \"boolean\", \"undefined\");\n    }\n\n    parse(status: number, data: IAccount): IAccount {\n        if(status !== 200) return data;\n\n        checkType(\"data\", data, \"object\");\n\n        checkField(data, \"id\", \"string\");\n        checkField(data, \"label\", \"string\");\n        checkField(data, \"created_at\", \"string\");\n        checkField(data, \"avatar_url\", \"string\", \"undefined\");\n\n        checkField(data, \"contact\", \"object\");\n        if (data.contact)\n            checkField(data.contact, \"email\", \"string\");\n\n        checkField(data, \"details\", \"object\");\n        checkField(data, \"flags\", \"object\", \"undefined\");\n        checkField(data, \"friends\", \"array\", \"undefined\");\n        checkField(data, \"rooms\", \"array\", \"undefined\");\n        \n        return { ...data, created_at: new Date(data.created_at) };\n    }\n}\n\nexport class AccountChange extends Command {\n    constructor(account_id: string, changes: { label?: string, name?: string, surname?: string }) {\n        super([\"account-accountChange\", {account_id, changes: JSON.stringify(changes)}]);\n    }\n\n    parse(status: number, data: IAccount) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountList extends Command {\n    constructor(included?: string[], volume?: number) {\n        super([\"account-accountList\", { volume, included }]);\n\n        checkType(\"volume\", volume, \"number\", \"undefined\");\n        checkType(\"included\", included, \"array\", \"undefined\");\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountCreate extends Command {\n    constructor(data: {email: string, password: string, label?: string}) {\n        super([\"account-accountCreate\", data]);\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountLogin extends Command {\n    constructor(token: string) {\n        super([\"account-accountLogin\", { token }]);\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountFind extends Command {\n    constructor(data: { email?: string, label?: string }) {\n        super([\"account-accountFind\", data]);\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountAddContact extends Command {\n    constructor(data: {account_id: string, contact_id: string}) {\n        super([\"account-accountAddContact\", data]);\n    }   \n    \n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n        \n        return data;\n    }\n}\n\nexport class RoomInfo extends Command {\n    constructor(room_id: string, accounts?: boolean) {\n        super([\"room-roomInfo\", { room_id, accounts }]);\n    }\n\n    parse(status: number, data: IAccount) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class RoomCreate extends Command {\n    constructor(account_id: string, label: string, invite: string[]) {\n        super([\"room-roomCreate\", { label, invite: [...invite, account_id] }]);\n    }\n\n    parse(status: number, data: any) {\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n}\n\nexport class AccountGetSuggestions extends Command{\n    // deepcode ignore no-any: Type declaration of 'any' loses type-safety\n    constructor(account_id: string){\n        super([\"account-accountGetSuggestions\", {account_id}]);\n    };\n\n    parse(status: number, data: any){\n        if(status !== 200) return data;\n\n        // TODO: Ensure types.\n        \n        return data;\n    }\n\n}\n","import { useState, useRef, useEffect, useCallback } from \"react\";\nimport { useStore } from \"store/hooks\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const useForkedState = <T extends any[], R>(fn: (...args: T) => R, ...args: T) => {\n    const ref = useRef(null as unknown as [R, (value: R) => void]);\n    const signal = useSignal();\n\n    if(ref.current === null) {\n        const value: R = fn(...args);\n        const setState = (val: R) => { ref.current[0] = val; signal(); }\n\n        ref.current = [ value, setState ];\n    }\n\n    useEffect(() => { \n        const value = fn(...args);\n\n        if(ref.current[0] !== value) \n            ref.current[1](value); \n    }, [fn, args]);\n\n    return ref.current;\n}\n\n/**\n * Redirect to page if condition met\n * @param path for redirect\n * @param condition\n */\nexport const useRestrictedPage = (condition: boolean, path: string = \"/home\" ) => {\n    const history = useHistory();\n    useEffect(() => {\n        if (condition) \n            history.push(path)\n        \n    }, [condition, path, history]);\n}\n\n/**\n * Redirect to page if current account is active\n * @param path for redirect\n */\nexport const useRestrictedPageForCurrentAccount = (path: string = \"/home\") => {\n    const currentAccount = useStore(state => state.currentAccount);\n    useRestrictedPage(!!currentAccount, path)\n}\n\n\n\nexport const useSignal = () => {\n    const [, updateState] = useState();\n    // @ts-ignore\n    return useCallback(() => updateState({}), []);\n}\n","import { useRef, useEffect } from 'react';\nimport { Client } from './client';\nimport { useSignal } from '../utils/hooks/general';\nimport config from '../config/config';\nimport { IRoom } from 'types';\nimport { AccountInfo, RoomInfo } from './commands';\nimport { useStore, useDispatch } from 'store/hooks';\nimport { setCurrentAccount } from 'store/actions';\nimport Account from \"./models/Account.model\";\n\nconst HOST_URL = config.host_url;\nconst cli = new Client(HOST_URL);\n\nexport const useCommand = (command: any, ...args: any[]) => {\n    const ref = useRef(null as unknown as { status: number, data?: any, message?: string });\n    const signal = useSignal();\n\n    useEffect(() => {\n        ref.current = { status: 102 };\n        \n        const fn = async () => {\n            const _args = args || [];\n            \n            const rq = await cli.execute(new command(..._args))\n            ref.current = rq;\n            signal();\n        }\n        fn();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    \n    return ref.current;\n}\n\n/**\n * \n * @param command \n * @param args \n * @example\n * const dispatchCommand = useDispatchCommand();\n * ...\n * dispatchCommand(AccountCreate, \"mike.eling97@gmail.com\", \"ThisIsMyPassBro\")\n */\nexport const useDispatchCommand = () => {\n    const ref = useRef(null as unknown as (command: any, ...args: any[]) => Promise<{ status: number, data: any }>);\n    const signal = useSignal();\n    \n    if(ref.current === null) {\n        \n        const fn = async (command: any, ...args: any[]) => {\n            const _args = args || [];\n            \n            const rq = await cli.execute(new command(..._args))\n            signal();\n            return rq;\n        }\n        ref.current = (command: any, ...args: any[]) => fn(command, ...args);\n    }\n    \n    return ref.current;\n}\n\nexport const useAccount = (account_id?: string, updateStore: boolean = false, options?: { rooms?: boolean, flags?: boolean, contacts?: boolean }) => {\n    const currentAccount = useStore(state => state.currentAccount);\n    const ref = useRef<Account | null | undefined>(!account_id ? currentAccount ?? undefined : undefined);\n    const dispatchStore = useDispatch();\n    const dispatchCommand = useDispatchCommand();\n    const signal = useSignal();\n\n    useEffect(() => {\n        const fn = async () => {\n            const accountInfoRq = (await dispatchCommand(AccountInfo, account_id || currentAccount?.id, options?.flags, options?.rooms, options?.contacts ));\n            \n            if(accountInfoRq.status === 200) {\n                const acc = new Account({ id: account_id || currentAccount?.id, ...accountInfoRq.data });\n\n                ref.current = acc as Account | null;\n                if (updateStore) dispatchStore(setCurrentAccount(acc));\n                signal();\n            }\n        }\n    \n        if(account_id || currentAccount?.id)\n            fn();\n            \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [account_id]);\n    \n    return ref.current ?? null;\n}\n\nexport const useRoom = (room_id: string, accounts?: boolean) => {\n    const ref = useRef<IRoom | null | undefined>();\n    const dispatchCommand = useDispatchCommand();\n    const signal = useSignal();\n\n    useEffect(() => {\n        const fn = async () => {\n            const roomInfoRq = (await dispatchCommand(RoomInfo, room_id, !!accounts));\n\n            if(roomInfoRq.status === 200) {\n                ref.current = roomInfoRq.data as IRoom | null;\n                signal();\n            }\n        }\n\n        if(room_id) fn();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [room_id]);\n    \n    return ref.current ?? null;\n}","import { IAccount } from \"types\";\nimport config from \"config/config\";\nimport { AccountInfo } from \"api/commands\";\nimport { Client } from \"api/client\";\n\nconst HOST_URL = config.host_url;\nconst cli = new Client(HOST_URL);\n\n/**\n * Set current account.\n * @param payload Account info.\n * @see api/commands/AccountInfo\n */\nexport const setCurrentAccount = (payload: IAccount | null) => {\n    return ({ type: \"SET_CURRENT_ACCOUNT\", payload });\n}\n\n/**\n * Update current account.\n * @param payload account_id\n * @see api/commands/AccountInfo\n */\nexport const updateCurrentAccount = async (account_id: string) => {\n    const rq = await cli.execute(new AccountInfo(account_id, true, true, true))\n\n    const payload: IAccount = rq.data;\n\n    return ({ type: \"SET_CURRENT_ACCOUNT\", payload });\n}\n\n/**\n * Set background theme.\n * @param theme \n */\nexport const setBackgroundTheme = (theme: { id: string, url: string, label: string }) => {\n    return ({ type: \"SET_BACKGROUND_THEME\", payload: theme });\n}","export type TResponse = {status: number, message?: string, data: any};\n\nexport interface IClient {\n    url: string\n}\n\nexport class Client implements IClient {\n    url: string\n\n    constructor(url: string) {\n        this.url = url;\n    }\n\n    makeArguments(args: {[key: string]: string}) {\n        return Object.entries(args).map((e => `${e[0]}=${typeof e[1] === \"object\" ? JSON.stringify(e[1]) : e[1]}`)).join(\"&\");\n    }\n\n    execute(command: ICommand) {\n        return new Promise<{status: number, data: any}>((resolve, reject) => {\n            let once = false;\n            const cmd = command.exec[0];\n            const args = this.makeArguments(command.exec[1]);\n    \n            const reqUrl = `${this.url}${cmd}?${args}`;\n\n            const handleResolve = (response: any) => {\n                if(!once) {\n                    once = true;\n                    \n                    const parsed_response = response\n                    \n                    console.log(\"ðŸ“¶\", cmd, \"=>\", parsed_response);\n                    resolve(parsed_response);\n                }\n                \n            }\n\n            let headers = new Headers({\n                'Access-Control-Allow-Origin':'*',\n                'Content-Type': 'multipart/form-data'\n            });\n\n            fetch(reqUrl, { mode: \"cors\", headers })\n                .then(response => response.json())\n                .then(handleResolve)\n                .catch(reject);\n        })\n    }\n}\n\n\nexport interface ICommand {\n    exec: [string, {[key: string]: any}];\n    status: number;\n\n    parse(status: number, data: any): any\n}\n\nexport class Command implements ICommand {\n    exec: [string, {[key: string]: any}];\n    status: number;\n\n    constructor(exec: [string, {[key: string]: any}]) {\n        this.exec = exec;\n        this.status = 0;\n    }\n\n    parse(status: number, data: any) {\n        return data;\n    }\n}","import { Dictionary, TAccountDetails, IRoom, IFriend } from \"types\";\n\n/**\n * Model representing an Account.\n */\nclass Account {\n    id: string;\n    label: string;\n    created_at: Date;\n    contact: Dictionary<string>;\n    avatar_url?: string;\n\n    details: TAccountDetails;\n\n    flags?: string[];\n    rooms?: IRoom[];\n    friends?: IFriend[];\n\n    constructor(account: Dictionary<any>) {\n        this.id = account.id;\n        this.label = account.label;\n        this.created_at = new Date(account.created_at);\n        this.contact = account.contact ?? [];\n        this.avatar_url = account.avatar_url;\n        this.details = account.details ?? {};\n        this.flags = account.flags;\n        this.rooms = account.rooms;\n        this.friends = account.friends;\n    }\n\n    get isValid() {\n        return Boolean(this.id && this.label)\n    }\n\n    name(...include: (\"first_name\" | \"last_name\" | \"middle_name\")[]) {\n        if (!include || include.length <= 0) include = [\"first_name\", \"last_name\"];\n\n        return include.map(inc => this?.details?.[inc] ?? null).filter(inc => !!inc).join(\" \") ?? this.label;\n    }\n\n    get initials() {\n        if (!this.details.first_name && !this.details.last_name)\n            return \"Unknown\";\n        return (`${this.details.first_name[0]}${this.details.last_name[0]}`).toUpperCase();\n    }\n}\n\nexport default Account;","export const isLoaded = (request: any) => {\n    return request !== null && request.status !== 102\n}\n\nconst arrayToStringList = (arr: string[]) => \n        arr.toString().replace(/,/g, \", \")\n\ntype TType = \"string\" | \"number\" | \"bigint\" | \"boolean\" | \"symbol\" | \"undefined\" | \"object\" | \"function\" | \"null\" | \"array\";\n\n/**\n * Throws an exception if the types are not correct.\n * @param name \n * @param value \n * @param types \n */\nexport const checkType = (name: string, value: any, ...types: TType[]) => {\n    let t: TType = typeof value;\n\n    if (t === \"object\")\n        if (value === null)\n            t = \"null\";\n        else if (Array.isArray(value))\n            t = \"array\";\n\n    if (!types.includes(t))\n        throw new Error(`Expected ${arrayToStringList(types)} for ${name}, got ${typeof value}`)\n\n    return value;\n}\n\n/**\n * Same as checkType but accepts an parent object.\n * @param obj \n * @param field \n * @param types \n */\nexport const checkField = <T, K extends keyof T>(obj: T, field: K, ...types: TType[]) => {\n    let val = obj[field];\n    checkType(field as string, val, ...types);\n    return val;\n}","const config = {\n    host_url: \"https://us-central1-ping-82fee.cloudfunctions.net/\" //\"http://localhost:5001/ping-82fee/us-central1/\" //\n};\n\nexport default config;","export interface IStorage {\n    accountIdToken?: string;\n}\n\nexport const getLocalStorageValue = (key: keyof IStorage) => {\n    const storage = localStorage as unknown as IStorage;\n\n    return storage[key];\n}\n\nexport const getLocalStorage = () => {\n    return localStorage as unknown as IStorage;\n}\n\nexport const setLocalStorageValue = (key: keyof IStorage, value: string) => {\n    localStorage.setItem(key, value);\n}\n\nexport const resetLocalStorageValue = (key: keyof IStorage) => {\n    localStorage.removeItem(key);\n}","export default __webpack_public_path__ + \"static/media/wave.f70c3bfc.svg\";","import * as firebase from \"firebase/app\";\nimport { messaging } from \"config/firebase\";\nimport { setLocalStorageValue } from \"storage/storage\";\n\nexport const signInWithPopup = async () => {\n    return new Promise((resolve, reject) => {\n        var provider = new firebase.auth.GoogleAuthProvider();\n        provider.addScope('https://www.googleapis.com/auth/contacts.readonly');\n        \n       firebase.auth().signInWithPopup(provider).then(function(result) {\n            fetchAccountIdToken();\n            resolve(result);\n          }).catch(function(error) {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(\"ðŸ”’ Authorization =>\", errorCode, errorMessage);\n            reject(error);\n            // ...\n          });\n          \n    });\n}\n\nexport const signInWithCredentials = async (email: string, password: string) => {\n    return new Promise((resolve, reject) => {\n       firebase.auth().signInWithEmailAndPassword(email, password)\n            .then((result) => {\n                fetchAccountIdToken();\n                resolve(result);\n            })\n            .catch((error) => {\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                console.log(\"ðŸ”’ Authorization =>\", errorCode, errorMessage);\n                reject(error);\n                // ...\n            });\n    });\n}\n\nexport const fetchAccountIdToken = () => {\n    const currentUser = firebase.auth()?.currentUser ?? null;\n\n    if(currentUser)\n        currentUser.getIdToken(/* forceRefresh */ true).then(function(idToken) {\n            console.log(idToken);\n            setLocalStorageValue(\"accountIdToken\", idToken);\n        }).catch(function(error) {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(\"ðŸ”’ Authorization =>\", errorCode, errorMessage);\n        });\n}\n\nexport const signUpWithCredentials = async (email: string, password: string) => {\n    return new Promise((resolve, reject) => {\n       firebase.auth().createUserWithEmailAndPassword(email, password)\n            .then((result) => {\n                resolve(result);\n            })\n            .catch((error) => {\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                console.log(\"ðŸ”’ Authorization =>\", errorCode, errorMessage);\n                reject(error);\n                // ...\n            });\n    });\n}\n\nexport const signOut = async () => {\n    return new Promise((resolve, reject) => {\n       firebase.auth().signOut()\n            .then((result) => {\n                resolve(result);\n            })\n            .catch((error) => {\n                var errorCode = error.code;\n                var errorMessage = error.message;\n                console.log(\"ðŸ”’ Authorization =>\", errorCode, errorMessage);\n                reject(error);\n                // ...\n            });\n    });\n}\n\nexport const getCurrentUserIdToken = async () => {\n    return new Promise<string>((resolve, reject) => {\n        firebase.auth()?.currentUser?.getIdToken(true).then(function(idToken) {\n            resolve(idToken);\n          }).catch(function(error) {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(\"ðŸ”’ User Id Token =>\", errorCode, errorMessage);\n            reject(error);\n          });\n    });\n}\n\n// TODO: Implement!\nexport const getDeviceToken = async () => {\n    return new Promise<string>((resolve, reject) => {\n        // Get Instance ID token. Initially this makes a network call, once retrieved\n        // subsequent calls to getToken will return from cache.\n        messaging.getToken().then((currentToken) => {\n            if (currentToken) {\n                resolve(currentToken)\n            } else {\n                console.log(\"ðŸ”’ Device Token =>\", \"No Instance ID token available. Request permission to generate one.\");\n                reject(new Error(\"No Instance ID token available. Request permission to generate one.\"));\n            }\n        }).catch((error) => {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(\"ðŸ”’ Device Token =>\", errorCode, errorMessage);\n            reject(error);\n        });\n  \n    });\n}\n\n// export function getAccessToken() {\n//     return new Promise(function(resolve, reject) {\n//       const key = require('../placeholders/service-account.json');\n//       const jwtClient = new google.auth.JWT(\n//         key.client_email,\n//         null,\n//         key.private_key,\n//         SCOPES,\n//         null\n//       );\n//       jwtClient.authorize(function(err, tokens) {\n//         if (err) {\n//           reject(err);\n//           return;\n//         }\n//         resolve(tokens.access_token);\n//       });\n//     });\n//   }","import { makeStyles } from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      minHeight: \"calc(100vh - (300px + 42px))\",\n      alignItems: \"center\",\n      //paddingTop: \"60px\"\n      [theme.breakpoints.up(\"sm\")]: {\n        minHeight: \"calc(100vh - (350px + 42px))\",\n        alignItems: \"flex-start\"\n      },\n    },\n    container: {\n      maxWidth: theme.breakpoints.values.md,\n      width: \"100%\",\n      padding: `0 ${theme.spacing(4)}px`,\n    },\n    inputWrapper: {\n\n    },\n    loginImage : {\n      width: \"auto\",\n      height: \"240px\",\n      position: \"absolute\",\n      right: \"2%\",\n      bottom: \"0px\",\n\n      [theme.breakpoints.up(\"sm\")]: {\n        height: \"310px\",\n        bottom: \"5px\"\n      },\n    },\n    imgContainer : {\n      height: \"300px\",\n      position: \"relative\",\n      overflow: \"hidden\",\n      background: `linear-gradient(to top left, ${theme.palette.primary.dark}, ${theme.palette.primary.main})`,\n\n      [theme.breakpoints.up(\"sm\")]: {\n        height: \"350px\"\n      },\n    },\n    wave: {\n      position: \"absolute\",\n      zIndex: 5,\n      bottom: \"-10%\",\n      left: \"-1%\",\n      width: \"102%\",\n      height: \"auto\"\n    },\n    footerWrapper: {\n      maxWidth: theme.breakpoints.values.md,\n      margin: \"0 auto\",\n      padding: `0 ${theme.spacing(4)}px`,\n    }\n    \n  }));\n\n  export default useStyles;\n","// * Translations\nconst translations = (preset: any) => ({\n    title: {\n        en_US: \"Sign in\",\n        pl_PL: \"BÄ…dÅº w kontakcie!\",\n        de_DE: \"Stayen ins Touchejen\"\n    },\n    // Example preset use. See src/utils/hooks/locale.ts for more.\n    yes: preset.yes\n})\n\nexport default translations;","export default __webpack_public_path__ + \"static/media/verifed.465bf5bf.svg\";","import React, { useState } from 'react';\nimport { useLittera } from \"react-littera\";\nimport useStyles from \"./styles\"\nimport translations from \"./trans\"\nimport { Button, TextField, Typography, Fab, Icon, CircularProgress, Backdrop } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport Flex from \"components/utils/Flex\";\nimport loginImage from \"assets/verifed.svg\";\nimport waveAsset from \"assets/wave.svg\";\nimport { signInWithCredentials, signInWithPopup } from \"api/auth\";\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport { useDispatchCommand } from \"api/hooks\";\nimport { AccountInfo } from \"api/commands\";\nimport { useDispatch } from \"store/hooks\";\nimport { setCurrentAccount } from \"store/actions\";\nimport { useRestrictedPageForCurrentAccount } from 'utils/hooks/general';\nimport Account from 'api/models/Account.model';\n\n// TODO: Translations...?\n\n/**\n * Login page component.\n */\nconst Login = () => {\n    const history = useHistory();\n    const [translated] = useLittera(translations);\n    const classes = useStyles();\n    const dispatchCommand = useDispatchCommand();\n    const dispatchStore = useDispatch();\n\n    const [emailInput, setEmailInput] = useState(\"\");\n    const [passwordInput, setPasswordInput] = useState(\"\");\n    const [errorMsg, setErrorMsg] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false)\n\n    useRestrictedPageForCurrentAccount();\n\n    const handleLogin = async (result: any) => {\n        const account = await dispatchCommand(AccountInfo, result?.user?.uid || \"\", true);\n\n        if (account.status === 200) {\n            //const accountIdToken = await getCurrentUserIdToken();\n\n            // ! Remember account id token.\n            //storageSetter(\"accountIdToken\", accountIdToken ?? \"\");\n            dispatchStore(setCurrentAccount(new Account({ id: result?.user?.uid, ...account.data })));\n\n            if (account.data?.flags?.includes(\"needs_init\"))\n            {\n                history.push(\"/welcome\");\n            } else {\n                // TODO: Save device_token.\n                // const device_token = await getDeviceToken();\n                history.push(\"/home\");\n\n            }\n        } else if(account.status === 404) {\n            // TODO: Account not found! What shall be done then?\n            setErrorMsg(\"Account not found!\");\n        }\n        if(account.status !== 0) setIsLoading(false);\n    }\n\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        setErrorMsg(\"\");\n        setIsLoading(true)\n\n        if (!isLoading) {\n            const email = emailInput;\n            const password = passwordInput;\n            signInWithCredentials(email, password).then(handleLogin).catch(err => {\n                setErrorMsg(err.message);\n                setIsLoading(false);\n            });\n        }\n    }\n\n    const handlePopupLogin = () => {\n        setErrorMsg(\"\");\n        setIsLoading(true);\n        signInWithPopup()\n            .then(handleLogin)\n            .catch((error) => {\n                setErrorMsg(error.message);\n                setIsLoading(false);\n            });\n\n    }\n\n    const handleInputChange = (inputName: string) => (event: React.FormEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n        // @ts-ignore\n        const newValue = event?.target?.value ?? \"\";\n\n        if (!isLoading) {\n            if (inputName === \"email\") setEmailInput(newValue);\n            if (inputName === \"password\") setPasswordInput(newValue);\n        }\n    }\n    \n    const handleBack = () => {\n        history.push(\"/signup\");\n    }\n\n    return <div style={{ width: \"100%\" }}>\n\n        <div className={classes.imgContainer}>\n            <img className={classes.loginImage} src={loginImage} alt=\"loginImage\" />\n            <img className={classes.wave} src={waveAsset} alt=\"\" />\n        </div>\n\n\n        <Flex justifyContent=\"center\" width=\"100%\" className={classes.root}>\n            <div className={classes.container}>\n                <Typography variant=\"h3\" paragraph>\n                    {translated.title}\n                </Typography>\n                <form onSubmit={handleSubmit}>\n                    <Flex className={classes.inputWrapper} flexDirection=\"column\">\n                        <TextField style={{ marginBottom: \"15px\" }} id=\"email-input\" value={emailInput} onChange={handleInputChange(\"email\")} type=\"email\" label=\"E-Mail\" variant=\"outlined\" />\n                        <TextField style={{ marginBottom: \"15px\" }} id=\"password-input\" value={passwordInput} onChange={handleInputChange(\"password\")} type=\"password\" label=\"Password\" variant=\"outlined\" />\n                    </Flex>\n\n                    {errorMsg && <Alert style={{ margin: \"10px 0\" }} severity=\"error\">\n                        <AlertTitle>Upps...</AlertTitle>\n                        {errorMsg}\n                    </Alert>}\n\n                    <Flex justifyContent=\"space-between\">\n                        <Button onClick={handleBack} color=\"primary\" type=\"button\">Sign Up</Button>\n                        <Fab color=\"primary\" aria-label=\"add\" type=\"submit\">\n                            <Icon style={{ color: \"white\" }}>keyboard_arrow_right</Icon>\n                        </Fab>\n                    </Flex>\n\n                </form>\n                <Button onClick={handlePopupLogin} type=\"button\">Login with Google!</Button>\n            </div>\n        </Flex>\n        <Flex className={classes.footerWrapper} alignItems=\"center\" justifyContent=\"flex-end\" height=\"42px\">\n            <Typography align=\"right\">Forgot password?</Typography>\n        </Flex>\n\n        {!isLoading ? null :\n            <Backdrop open={true} style={{zIndex:5}}>\n                <CircularProgress color=\"primary\" />\n            </Backdrop>}\n\n    </div>\n}\n\n\n\nexport default Login;"],"sourceRoot":""}