(this["webpackJsonpcircles-web"]=this["webpackJsonpcircles-web"]||[]).push([[2],{142:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return u}));var r=n(0),c=n(53),a=n(141),i=function(t){var e=Object(r.useContext)(c.b);return Object(r.useMemo)((function(){return t(e[0])}),[e,t])},u=function(){var t=Object(r.useContext)(c.b);return Object(r.useRef)((function(e){console.log("\ud83d\udcc1",e.type,"=>",e.payload),function(t,e){t((function(t){var n={};switch(e.type){case"SET_CURRENT_ACCOUNT":n.currentAccount=Object(a.a)({},e.payload);break;case"SET_BACKGROUND_THEME":n.preferences||(n.preferences={}),n.preferences.backgroundTheme=Object(a.a)({},e.payload)}return Object(a.a)(Object(a.a)({},t),n)}))}(t[1],e)})).current}},146:function(t,e,n){"use strict";var r=n(141),c=n(0),a=n.n(c);e.a=function(t){var e,n=function(t){for(var e=Object(r.a)({},t),n=arguments.length,c=new Array(n>1?n-1:0),a=1;a<n;a++)c[a-1]=arguments[a];for(var i in e)c.includes(i)&&delete e[i];return e}(t,"children","className"),c=Object.freeze(Object(r.a)(Object(r.a)({display:"flex"},n),t.style)),i=null!==(e=t.rootComponent)&&void 0!==e?e:a.a.createElement("div");return a.a.cloneElement(i,{onClick:t.onClick,style:c,className:t.className,children:t.children})}},147:function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return h})),n.d(e,"g",(function(){return v})),n.d(e,"f",(function(){return p})),n.d(e,"b",(function(){return j}));var r=n(159),c=n(141),a=n(154),i=n(155),u=n(170),o=n(173),s=n(158),l=n(160),f=function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(t,r,c,i){var u;return Object(a.a)(this,n),u=e.call(this,["account-accountInfo",{account_id:t,flags:!!r,rooms:!!c,friends:!!i}]),Object(l.b)("account_id",t,"string"),Object(l.b)("flags",r,"boolean","undefined"),Object(l.b)("rooms",c,"boolean","undefined"),Object(l.b)("friends",i,"boolean","undefined"),u}return Object(i.a)(n,[{key:"parse",value:function(t,e){return 200!==t?e:(Object(l.b)("data",e,"object"),Object(l.a)(e,"id","string"),Object(l.a)(e,"label","string"),Object(l.a)(e,"created_at","string"),Object(l.a)(e,"avatar_url","string","undefined"),Object(l.a)(e,"contact","object"),e.contact&&Object(l.a)(e.contact,"email","string"),Object(l.a)(e,"details","object"),Object(l.a)(e,"flags","object","undefined"),Object(l.a)(e,"friends","array","undefined"),Object(l.a)(e,"rooms","array","undefined"),Object(c.a)(Object(c.a)({},e),{},{created_at:new Date(e.created_at)}))}}]),n}(s.b),d=function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(t,r){return Object(a.a)(this,n),e.call(this,["account-accountChange",{account_id:t,changes:JSON.stringify(r)}])}return Object(i.a)(n,[{key:"parse",value:function(t,e){return e}}]),n}(s.b),b=function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(t,r){var c;return Object(a.a)(this,n),c=e.call(this,["account-accountList",{volume:r,included:t}]),Object(l.b)("volume",r,"number","undefined"),Object(l.b)("included",t,"array","undefined"),c}return Object(i.a)(n,[{key:"parse",value:function(t,e){return e}}]),n}(s.b),h=(s.b,function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(t){return Object(a.a)(this,n),e.call(this,["account-accountLogin",{token:t}])}return Object(i.a)(n,[{key:"parse",value:function(t,e){return e}}]),n}(s.b)),v=(s.b,s.b,function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(t,r){return Object(a.a)(this,n),e.call(this,["room-roomInfo",{room_id:t,accounts:r}])}return Object(i.a)(n,[{key:"parse",value:function(t,e){return e}}]),n}(s.b)),p=function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(t,c,i){return Object(a.a)(this,n),e.call(this,["room-roomCreate",{label:c,invite:[].concat(Object(r.a)(i),[t])}])}return Object(i.a)(n,[{key:"parse",value:function(t,e){return e}}]),n}(s.b),j=function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(t){return Object(a.a)(this,n),e.call(this,["account-accountGetSuggestions",{account_id:t}])}return Object(i.a)(n,[{key:"parse",value:function(t,e){return e}}]),n}(s.b)},148:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return g})),n.d(e,"a",(function(){return y})),n.d(e,"d",(function(){return w}));var r=n(141),c=n(143),a=n.n(c),i=n(171),u=n(159),o=n(144),s=n(0),l=n(158),f=n(150),d=n(162),b=n(147),h=n(142),v=n(153),p=n(152),j=d.a.host_url,O=new l.a(j),m=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var c=Object(s.useRef)(null),l=Object(f.c)();return Object(s.useEffect)((function(){c.current={status:102},function(){var e=Object(o.a)(a.a.mark((function e(){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||[],e.next=3,O.execute(Object(i.a)(t,Object(u.a)(r)));case 3:o=e.sent,c.current=o,l();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),c.current},g=function(){var t=Object(s.useRef)(null),e=Object(f.c)();if(null===t.current){var n=function(){var t=Object(o.a)(a.a.mark((function t(n){var r,c,u,o,s,l=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=l.length,c=new Array(r>1?r-1:0),u=1;u<r;u++)c[u-1]=l[u];return o=c||[],t.next=4,O.execute(Object(i.a)(n,o));case 4:return s=t.sent,e(),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t.current=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),c=1;c<e;c++)r[c-1]=arguments[c];return n.apply(void 0,[t].concat(r))}}return t.current},y=function(t){var e,n,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,u=Object(h.b)((function(t){return t.currentAccount})),l=Object(s.useRef)(t?void 0:null!==(e=new p.a(u))&&void 0!==e?e:void 0),d=Object(h.a)(),j=g(),O=Object(f.c)();return Object(s.useEffect)((function(){var e=function(){var e=Object(o.a)(a.a.mark((function e(){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(b.c,t||(null===u||void 0===u?void 0:u.id),null===i||void 0===i?void 0:i.flags,null===i||void 0===i?void 0:i.rooms,null===i||void 0===i?void 0:i.contacts);case 2:200===(n=e.sent).status&&(o=new p.a(Object(r.a)({id:t||(null===u||void 0===u?void 0:u.id)},n.data)),l.current=o,c&&d(Object(v.b)(o)),O());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(t||(null===u||void 0===u?void 0:u.id))&&e()}),[t]),null!==(n=l.current)&&void 0!==n?n:null},w=function(t,e){var n,r=Object(s.useRef)(),c=g(),i=Object(f.c)();return Object(s.useEffect)((function(){t&&function(){var n=Object(o.a)(a.a.mark((function n(){var u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(b.g,t,!!e);case 2:200===(u=n.sent).status&&(r.current=u.data,i());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[t]),null!==(n=r.current)&&void 0!==n?n:null}},150:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return l}));var r=n(26),c=n(0),a=n(142),i=n(9),u=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var a=Object(c.useRef)(null),i=l();if(null===a.current){var u=t.apply(void 0,n),o=function(t){a.current[0]=t,i()};a.current=[u,o]}return Object(c.useEffect)((function(){var e=t.apply(void 0,n);a.current[0]!==e&&a.current[1](e)}),[t,n]),a.current},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/home",n=Object(i.f)();Object(c.useEffect)((function(){t&&n.push(e)}),[t,e,n])},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/home",e=Object(a.b)((function(t){return t.currentAccount}));o(!!e,t)},l=function(){var t=Object(c.useState)(),e=Object(r.a)(t,2)[1];return Object(c.useCallback)((function(){return e({})}),[])}},152:function(t,e,n){"use strict";var r=n(154),c=n(155),a=function(){function t(e){var n,c;Object(r.a)(this,t),this.id=void 0,this.label=void 0,this.created_at=void 0,this.contact=void 0,this.avatar_url=void 0,this.details=void 0,this.flags=void 0,this.rooms=void 0,this.friends=void 0,this.id=e.id,this.label=e.label,this.created_at=new Date(e.created_at),this.contact=null!==(n=e.contact)&&void 0!==n?n:[],this.avatar_url=e.avatar_url,this.details=null!==(c=e.details)&&void 0!==c?c:{},this.flags=e.flags,this.rooms=e.rooms,this.friends=e.friends}return Object(c.a)(t,[{key:"name",value:function(){for(var t,e=this,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(!r||r.length<=0)&&(r=["first_name","last_name"]),null!==(t=r.map((function(t){var n,r;return null!==(n=null===e||void 0===e||null===(r=e.details)||void 0===r?void 0:r[t])&&void 0!==n?n:null})).filter((function(t){return!!t})).join(" "))&&void 0!==t?t:this.label}},{key:"isValid",get:function(){return Boolean(this.id&&this.label)}},{key:"initials",get:function(){return this.details.first_name||this.details.last_name?"".concat(this.details.first_name[0]).concat(this.details.last_name[0]).toUpperCase():"Unknown"}}]),t}();e.a=a},153:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return b})),n.d(e,"a",(function(){return h}));var r=n(143),c=n.n(r),a=n(144),i=n(162),u=n(147),o=n(158),s=n(152),l=i.a.host_url,f=new o.a(l),d=function(t){return{type:"SET_CURRENT_ACCOUNT",payload:t}},b=function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.execute(new u.c(e,!0,!0,!0));case 2:return n=t.sent,r=new s.a(n.data),t.abrupt("return",{type:"SET_CURRENT_ACCOUNT",payload:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(t){return{type:"SET_BACKGROUND_THEME",payload:t}}},158:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=n(154),c=n(155),a=function(){function t(e){Object(r.a)(this,t),this.url=void 0,this.url=e}return Object(c.a)(t,[{key:"makeArguments",value:function(t){return Object.entries(t).map((function(t){return"".concat(t[0],"=").concat("object"===typeof t[1]?JSON.stringify(t[1]):t[1])})).join("&")}},{key:"execute",value:function(t){var e=this;return new Promise((function(n,r){var c=!1,a=t.exec[0],i=e.makeArguments(t.exec[1]),u="".concat(e.url).concat(a,"?").concat(i),o=new Headers({"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"});fetch(u,{mode:"cors",headers:o}).then((function(t){return t.json()})).then((function(t){if(!c){c=!0;var e=t;console.log("\ud83d\udcf6",a,"=>",e),n(e)}})).catch(r)}))}}]),t}(),i=function(){function t(e){Object(r.a)(this,t),this.exec=void 0,this.status=void 0,this.exec=e,this.status=0}return Object(c.a)(t,[{key:"parse",value:function(t,e){return e}}]),t}()},160:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i}));var r=function(t){return null!==t&&102!==t.status},c=function(t){return t.toString().replace(/,/g,", ")},a=function(t,e){var n=typeof e;"object"===n&&(null===e?n="null":Array.isArray(e)&&(n="array"));for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];if(!a.includes(n))throw new Error("Expected ".concat(c(a)," for ").concat(t,", got ").concat(typeof e));return e},i=function(t,e){for(var n=t[e],r=arguments.length,c=new Array(r>2?r-2:0),i=2;i<r;i++)c[i-2]=arguments[i];return a.apply(void 0,[e,n].concat(c)),n}},162:function(t,e,n){"use strict";e.a={host_url:"https://us-central1-ping-82fee.cloudfunctions.net/"}},168:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return c}));var r=function(t,e){localStorage.setItem(t,e)},c=function(t){localStorage.removeItem(t)}},169:function(t,e,n){"use strict";e.a=n.p+"static/media/wave.f70c3bfc.svg"},177:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return d}));var r=n(143),c=n.n(r),a=n(144),i=n(48),u=(n(84),n(168)),o=function(){var t=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=new i.auth.GoogleAuthProvider;n.addScope("https://www.googleapis.com/auth/contacts.readonly"),i.auth().setPersistence(i.auth.Auth.Persistence.LOCAL).then((function(){return i.auth().signInWithPopup(n)})).then((function(e){l(),t(e)})).catch((function(t){var n=t.code,r=t.message;console.log("\ud83d\udd12 Authorization =>",n,r),e(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){i.auth().setPersistence(i.auth.Auth.Persistence.LOCAL).then((function(){return i.auth().signInWithEmailAndPassword(e,n)})).then((function(e){l(),t(e)})).catch((function(t){var e=t.code,n=t.message;console.log("\ud83d\udd12 Authorization =>",e,n),r(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t,e,n=null!==(t=null===(e=i.auth())||void 0===e?void 0:e.currentUser)&&void 0!==t?t:null;n&&n.getIdToken(!0).then((function(t){Object(u.b)("accountIdToken",t)})).catch((function(t){var e=t.code,n=t.message;console.log("\ud83d\udd12 Authorization =>",e,n)}))},f=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){i.auth().createUserWithEmailAndPassword(e,n).then((function(e){t(e)})).catch((function(t){var e=t.code,n=t.message;console.log("\ud83d\udd12 Authorization =>",e,n),r(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){i.auth().signOut().then((function(e){t(e)})).catch((function(t){var n=t.code,r=t.message;console.log("\ud83d\udd12 Authorization =>",n,r),e(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},224:function(t,e,n){"use strict";n.r(e);var r=n(4),c=n(143),a=n.n(c),i=n(141),u=n(144),o=n(26),s=n(0),l=n(61),f=n(151),d=n(128),b=Object(d.a)((function(t){return{root:Object(f.a)({minHeight:"calc(100vh - (300px + 42px))",alignItems:"center"},t.breakpoints.up("sm"),{minHeight:"calc(100vh - (350px + 42px))",alignItems:"flex-start"}),container:{maxWidth:t.breakpoints.values.md,width:"100%",padding:"0 ".concat(t.spacing(4),"px")},inputWrapper:{},loginImage:Object(f.a)({width:"auto",height:"240px",position:"absolute",right:"2%",bottom:"0px"},t.breakpoints.up("sm"),{height:"310px",bottom:"5px"}),imgContainer:Object(f.a)({height:"300px",position:"relative",overflow:"hidden",background:"linear-gradient(to top left, ".concat(t.palette.primary.dark,", ").concat(t.palette.primary.main,")")},t.breakpoints.up("sm"),{height:"350px"}),wave:{position:"absolute",zIndex:5,bottom:"-10%",left:"-1%",width:"102%",height:"auto"},footerWrapper:{maxWidth:t.breakpoints.values.md,margin:"0 auto",padding:"0 ".concat(t.spacing(4),"px")}}})),h=function(t){return{title:{en_US:"Sign in",pl_PL:"B\u0105d\u017a w kontakcie!",de_DE:"Stayen ins Touchejen"},yes:t.yes}},v=n(239),p=n(352),j=n(133),O=n(334),m=n(238),g=n(335),y=n(337),w=n(9),x=n(146),k=n.p+"static/media/verifed.465bf5bf.svg",_=n(169),A=n(177),C=n(355),E=n(333),S=n(148),N=n(147),T=n(142),I=n(153),P=n(150),U=n(152);e.default=function(){var t=Object(w.f)(),e=Object(l.useLittera)(h),n=Object(o.a)(e,1)[0],c=b(),f=Object(S.c)(),d=Object(T.a)(),R=Object(s.useState)(""),L=Object(o.a)(R,2),W=L[0],z=L[1],D=Object(s.useState)(""),B=Object(o.a)(D,2),G=B[0],H=B[1],J=Object(s.useState)(""),M=Object(o.a)(J,2),K=M[0],F=M[1],V=Object(s.useState)(!1),q=Object(o.a)(V,2),Q=q[0],X=q[1];Object(P.b)();var Y=function(){var e=Object(u.a)(a.a.mark((function e(n){var r,c,u,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(N.c,(null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.uid)||"",!0);case 2:200===(c=e.sent).status?(d(Object(I.b)(new U.a(Object(i.a)({id:null===n||void 0===n||null===(u=n.user)||void 0===u?void 0:u.uid},c.data)))),(null===(o=c.data)||void 0===o||null===(s=o.flags)||void 0===s?void 0:s.includes("needs_init"))?t.push("/welcome"):t.push("/home")):404===c.status&&F("Account not found!"),0!==c.status&&X(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(t){return function(e){var n,r,c=null!==(n=null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.value)&&void 0!==n?n:"";Q||("email"===t&&z(c),"password"===t&&H(c))}};return Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsxs)("div",{className:c.imgContainer,children:[Object(r.jsx)("img",{className:c.loginImage,src:k,alt:"loginImage"}),Object(r.jsx)("img",{className:c.wave,src:_.a,alt:""})]}),Object(r.jsx)(x.a,{justifyContent:"center",width:"100%",className:c.root,children:Object(r.jsxs)("div",{className:c.container,children:[Object(r.jsx)(v.a,{variant:"h3",paragraph:!0,children:n.title}),Object(r.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),F(""),X(!0),!Q){var e=W,n=G;Object(A.a)(e,n).then(Y).catch((function(t){F(t.message),X(!1)}))}},children:[Object(r.jsxs)(x.a,{className:c.inputWrapper,flexDirection:"column",children:[Object(r.jsx)(p.a,{style:{marginBottom:"15px"},id:"email-input",value:W,onChange:Z("email"),type:"email",label:"E-Mail",variant:"outlined"}),Object(r.jsx)(p.a,{style:{marginBottom:"15px"},id:"password-input",value:G,onChange:Z("password"),type:"password",label:"Password",variant:"outlined"})]}),K&&Object(r.jsxs)(C.a,{style:{margin:"10px 0"},severity:"error",children:[Object(r.jsx)(E.a,{children:"Upps..."}),K]}),Object(r.jsxs)(x.a,{justifyContent:"space-between",children:[Object(r.jsx)(j.a,{onClick:function(){t.push("/signup")},color:"primary",type:"button",children:"Sign Up"}),Object(r.jsx)(O.a,{color:"primary","aria-label":"add",type:"submit",children:Object(r.jsx)(m.a,{style:{color:"white"},children:"keyboard_arrow_right"})})]})]}),Object(r.jsx)(j.a,{onClick:function(){F(""),X(!0),Object(A.b)().then(Y).catch((function(t){F(t.message),X(!1)}))},type:"button",children:"Login with Google!"})]})}),Object(r.jsx)(x.a,{className:c.footerWrapper,alignItems:"center",justifyContent:"flex-end",height:"42px",children:Object(r.jsx)(v.a,{align:"right",children:"Forgot password?"})}),Q?Object(r.jsx)(g.a,{open:!0,style:{zIndex:5},children:Object(r.jsx)(y.a,{color:"primary"})}):null]})}}}]);
//# sourceMappingURL=2.b2384475.chunk.js.map